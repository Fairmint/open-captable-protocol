generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "mongodb"
    url      = env("DATABASE_URL")
}

model Issuer {
    id                               String        @id @default(auto()) @map("_id") @db.ObjectId
    object_type                      String        @default("ISSUER")
    legal_name                       String
    dba                              String?
    formation_date                   String
    country_of_formation             String
    country_subdivision_of_formation String
    taxID                            String?
    email                            String?
    phone                            String?
    address                          String?
    initial_shares_authorized        Int?
    stakeholders                     Stakeholder[]
    comments                         String?
}
model Stakeholder {
  id                   String             @id @default(auto()) @map("_id") @db.ObjectId
  issuerId             String             @db.ObjectId
  stakeholder_type     StakeholderType
  issuer_assigned_id   String?
  current_relationship StakeholderRelationshipType?
  primary_contact      ContactInfo?       @relation(fields: [contactInfoId], references: [id])
  comments             String?
  Issuer               Issuer             @relation(fields: [issuerId], references: [id])
  contactInfoId        String?            @db.ObjectId
  Name                 Name?              @relation(fields: [nameId], references: [id])
  nameId               String?            @db.ObjectId
}

model ContactInfo {
    id            String        @id @default(auto()) @map("_id") @db.ObjectId
    name          Name?         @relation(fields: [nameId], references: [id])
    phone_numbers String[]
    emails        String[]
    Stakeholder   Stakeholder[]
    nameId        String?       @db.ObjectId
}

model Name {
    id          String        @id @default(auto()) @map("_id") @db.ObjectId
    legal_name  String
    first_name  String?
    last_name   String?
    Stakeholder Stakeholder[]
    ContactInfo ContactInfo[]
}

// * ENUMS

enum StockClassType {
    PREFERRED
    COMMON
}

enum StockPlanCancellationBehaviorType {
    RETURN_TO_POOL
    CANCEL
}

enum ValuationType {
    PREMONEY
    POSTMONEY
}

enum AllocationTypeEnum {
    ROUND_DOWN
    ROUND_UP
}

enum AddressType {
    LEGAL
    CONTACT
    OTHER
}

enum EmailType {
    PERSONAL
    BUSINESS
    OTHER
}

enum PhoneType {
    MOBILE
    HOME
    BUSINESS
}

enum StakeholderType {
    INDIVIDUAL
    INSTITUTION
}

enum StakeholderRelationshipType {
    ADVISOR
    BOARD_MEMBER
    CONSULTANT
    EMPLOYEE
    EX_ADVISOR
    EX_CONSULTANT
    EX_EMPLOYEE
    EXECUTIVE
    FOUNDER
    INVESTOR
    NON_US_EMPLOYEE
    OFFICER
    OTHER
}
