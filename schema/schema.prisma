generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model Issuer {
  id                               String        @id @default(uuid())
  object_type                      String        @default("ISSUER")
  legal_name                       String
  dba                              String?
  formation_date                   String
  country_of_formation             String
  country_subdivision_of_formation String
  TaxID                            TaxID[]
  email                            String?
  phone                            String?
  address                          Address?
  initial_shares_authorized        Int?
  stakeholders                     Stakeholder[]
  stockClasses                     StockClass[]
  comments                         String?
}

model Address {
  id                  String        @id @default(uuid())
  address_type        AddressType
  street_suite        String
  city                String
  country_subdivision String
  country             String
  postal_code         String
}

model TaxID {
  id            String  @id @default(uuid())
  tax_id        String
  country       String
}

model StockClass {
  id                              String                      @id @default(uuid())
  name                            String
  class_type                      StockClassType
  default_id_prefix               String
  initial_shares_authorized       Float
  board_approval_date             String?
  stockholder_approval_date       String?
  votes_per_share                 Float
  par_value                       Float?
  price_per_share                 Float?
  seniority                       Float
  liquidation_preference_multiple Float?
  participation_cap_multiple      Float?
  conversion_rights_from          StockClassConversionRight[] 
  conversion_rights_to            StockClassConversionRight[] 
  StockPlan                       StockPlan[]
}

model StockClassConversionRight {
  id                 String @id @default(uuid())
  from_class_id      String
  to_class_id        String
  conversion_ratio   Float
  conversion_trigger Float?
  conversion_price   Float?
}

model StockPlan {
  id                            String                             @id @default(uuid())
  plan_name                     String
  board_approval_date           String?
  stockholder_approval_date     String?
  initial_shares_reserved       Float
  default_cancellation_behavior StockPlanCancellationBehaviorType?
  comments                      String?
}

model Valuation {
  id                        String        @id @default(uuid())
  provider                  String?
  board_approval_date       String?
  stockholder_approval_date String?
  price_per_share           Float
  effective_date            String
  stock_class_id            String
  valuation_type            ValuationType
  comments                  String?
}

model Stakeholder {
  id                       String                       @id @default(uuid())
  issuerId                 String
  stakeholder_type         StakeholderType
  issuer_assigned_id       String?
  current_relationship     StakeholderRelationshipType?
  primary_contact          ContactInfo? 
  comments                 String?
}
